"use strict";var _Listener=require("../lib/structures/Listener");var _HandlerManager=require("../lib/managers/HandlerManager");var _jsLogger=_interopRequireDefault(require("js-logger"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}new _Listener.Listener({event:"messageCreate",name:"gcommands-messageCommandHandler",run:async message=>{const client=message.client;if(!client.options.messageSupport)return;const mention=message.content.split(" ")[0].match(new RegExp(`^<@!?(${client.user.id})>`));const prefix=mention?.[0]||client.options?.messagePrefix;if(!message.content.startsWith(prefix))return;const[commandName,...args]=message.content.slice(prefix.length).trim().split(/ +/g);if(commandName.length===0)return;await Promise.resolve(_HandlerManager.Handlers.messageCommandHandler(message,commandName,args)).catch(error=>{_jsLogger.default.error(typeof error.code!=="undefined"?error.code:"",error.message);if(error.stack)_jsLogger.default.trace(error.stack)})}});